//==============================================================================//Name://  performPolySoftEdge.mel//==============================================================================//Purpose://  Расширенная замена стандартного инструмента Edit Polygons\Normals\Soften/Harden//==============================================================================//Usage://  1. Save the performPolySoftEdge.mel to your scripts directory.//  2. Start Maya. In the command line type PolygonSoftenHardenOptions();//  3. Middlemouse drag to a shelf you like.//==============================================================================// Copyright (C) 1997-2004 Alias Systems Corp.//// The information in this file is provided for the exclusive use of the// licensees of Alias.  Such users have the right to use, modify,// and incorporate this code into other products for purposes authorized// by the Alias license agreement, without fee.//// ALIAS DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,// INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO// EVENT SHALL ALIAS BE LIABLE FOR ANY SPECIAL, INDIRECT OR// CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,// DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER// TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR// PERFORMANCE OF THIS SOFTWARE.//  Alias|Wavefront Script File//  MODIFY THIS AT YOUR OWN RISK////  Creation Date:  4 April 1997////  Procedure Name://      performPolySoftEdge////  Description://        soften the selected polygon edges////  Input Arguments://        $option : Whether to set the options to default values.//  Return Value://        command string iff $option==2//////////////////////////////////////////////////////////////////////////////////////////                : 3       2005                                                    ////           :                            ,                                      .  ////////////////////////////////////////////////////////////////////////////////////////proc setOptionVars (int $forceFactorySettings){     if ($forceFactorySettings || !`optionVar -exists polySoftEdge`)                optionVar -floatValue polySoftEdge 30.0;        //if ($forceFactorySettings || !`optionVar -exists polySoftEdgeWorldSpace`)        //optionVar -intValue polySoftEdgeWorldSpace 1;}global proc performPolySoftEdgeSetup (string $parent, int $forceFactorySettings){        setOptionVars($forceFactorySettings);        setParent $parent;     float $fval = `optionVar -query polySoftEdge`;     floatSliderGrp -edit -value $fval polySoftEdge;        //int $ival = `optionVar -query polySoftEdgeWorldSpace`;    //checkBoxGrp -edit -value1 $ival polySoftEdgeWorldSpace;}global proc performPolySoftEdgeCallback (string $parent, int $doIt){        setParent $parent;        optionVar -floatValue polySoftEdge                        `floatSliderGrp -query -value polySoftEdge`;    //optionVar -intValue polySoftEdgeWorldSpace        //`checkBoxGrp -query -value1 polySoftEdgeWorldSpace`;        if ($doIt) {                performPolySoftEdge 0;                addToRecentCommandQueue "performPolySoftEdge 0" "PolySoftEdge";        }}proc polySoftEdgeOptions (){        string $commandName = "performPolySoftEdge";        string $callback = ($commandName + "Callback");        string $setup = ($commandName + "Setup");        string $layout = getOptionBox();        setParent $layout;        setUITemplate -pushTemplate DefaultTemplate;        waitCursor -state 1;        tabLayout -scr true -tv false;        string $parent = `columnLayout -adjustableColumn 1`;        floatSliderGrp -label "Angle" -min 0.0 -max 180.0 -fmn 0.0 -fmx 180.0 polySoftEdge;    rowColumnLayout -nc 18 -cw 1 5 -cw 2 25 -cw 3 25 -cw 4 25 -cw 5 25 -cw 6 25 -cw 7 25 -cw 8 25 -cw 9 25 -cw 10 25 -cw 11 25 -cw 12 25 -cw 13 25 -cw 14 25 -cw 15 25 -cw 16 25 -cw 17 25 -cw 18 25        -columnAlign  2 "center"        -columnAlign  3 "center"        -columnAttach 1 "right" 0        allOnOffLayout;        text -l "";        button -label "0"            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 0.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1 );        button -label "15" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 15.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "20" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 20.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "25" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 25.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "30" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 30.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "35" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 35.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "40" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 40.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "45" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 45.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "50" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 50.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "55" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 55.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "60" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 60.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "65" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 65.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "70" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 70.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "75" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 75.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "80" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 80.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "90" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 90.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        button -label "180" -w 30            -c ("setParent " + $parent + "; "                + "floatSliderGrp -edit -value 180.0 polySoftEdge;"                + $commandName + "Callback " + $parent + " 0" + 1);        setParent ..;    //checkBoxGrp -label1 "World Space Coords" polySoftEdgeWorldSpace;        waitCursor -state 0;        setUITemplate -popTemplate;        string $applyBtn = getOptionBoxApplyBtn();        button -edit -label "Soft/Hard"               -command ($callback + " " + $parent + " " + 1)                $applyBtn;        string $saveBtn = getOptionBoxSaveBtn();        button -edit                -command ($callback + " " + $parent + " " + 0 + "; hideOptionBox")                $saveBtn;        string $resetBtn = getOptionBoxResetBtn();        button -edit                -command ($setup + " " + $parent + " " + 1)                $resetBtn;        setOptionBoxTitle("Polygon Soften/Harden Edge Options");        setOptionBoxHelpTag( "NormalsSoftenHarden" );        eval (($setup + " " + $parent + " " + 0));        showOptionBox();}global proc string performPolySoftEdge (int $option){        string $cmd="";        string $sel[];        switch ($option) {        case 0:                setOptionVars(false);                float $fval = `optionVar -query polySoftEdge`;        //int $ivWS = `optionVar -query polySoftEdgeWorldSpace`;                $cmd=("polySoftEdge -a " + $fval);                polyPerformAction $cmd e 0;                break;        case 1: polySoftEdgeOptions; break;        default:                setOptionVars(false);                float $fval = `optionVar -query polySoftEdge`;        //int $ivWS = `optionVar -query polySoftEdgeWorldSpace`;                $cmd=("polySoftEdge -a " + $fval);                $cmd = ("polyPerformAction \"" + $cmd + "\" e 0");                // $cmd ="performPolySoftEdge 0";        }        return $cmd;}