//==============================================================================//Name://  combineAdvance.mel//==============================================================================//Usage://  1. Save the combineAdvance.mel to your scripts directory.//  2. Start Maya. In the command line type combineAdvance();//  3. Middlemouse drag to a shelf you like.//==============================================================================global proc combineAdvance(){        killOppositeAttr();        makeIdentity -apply true -t 1 -r 1 -s 1 -n 0;        DeleteHistory;        string $sel[] = `ls -sl -long`;        string $pathOfFirst[0] = `listRelatives -f -p $sel[size($sel)-1]`;        string $tokenBuffer[];        int $numTokens;        string $newObjName[];	{	if(`size($sel)` == 1)		error "Selected two of more objects";	if ($pathOfFirst[0] != "")        {        duplicate;        string $newObjName[] = `polyUnite -ch 0`;        parent $newObjName $pathOfFirst[0];        delete $sel;        }        else            {//            string $sourceShape[] = `listRelatives -s ($tokenBuffer[$numTokens-1])`;            duplicate;            string $newObjName[] = `polyUnite -ch 0`;//            string $targetShape[] = `listRelatives -s $newObjName`;//            delete `listRelatives -s ($tokenBuffer[$numTokens-1])`;//            parent -s -add ($tokenBuffer[$numTokens-1]) $newObjName;//            parent $newObjName $pathOfFirst[0];            delete $sel;            };        $numTokens = `tokenize $sel[size($sel)-1] "|" $tokenBuffer`;        rename $newObjName ($tokenBuffer[$numTokens-1]);	}}