////////////////////////////////////////////////////////////////////////////
//	Created		: 28.04.2011
//	Author		: Nikolay Partas
//	Copyright (C) GSC Game World - 2011
////////////////////////////////////////////////////////////////////////////

#include "common.h"
#include "gbuffer.h"
#include "dof_functions.h"
#include "gamma_correction.h"
#include "luminance.h"

Texture2D t_frame_color0;

float4 main( v2p_TL vin) : SV_TARGET
{
    float result_luminance = 0.0f;
    
	result_luminance	   = get_luminance( t_frame_color0.Sample(s_position, vin.Tex0).rgb );
	result_luminance 	   = log( pixel_luminance_epsilon + result_luminance );
	
    return float4(result_luminance, result_luminance, result_luminance, 0.0f);
}